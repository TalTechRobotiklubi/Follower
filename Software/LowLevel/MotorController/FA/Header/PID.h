#ifndef _PID_H_
#define _PID_H_

//----------------------------------------------------------------------------------------------------------------------------
// INCLUDE FILES
//----------------------------------------------------------------------------------------------------------------------------
#include "stm32f10x.h"

//----------------------------------------------------------------------------------------------------------------------------
// DATA STRUCTURES
//----------------------------------------------------------------------------------------------------------------------------
typedef struct
{
	//------------------------------------------------------------------------------------------------------------------------
	// Inputs
	//------------------------------------------------------------------------------------------------------------------------
	float*		pfSetpoint;				//Desired velocity in RPM
	float*		pfSpeedAct;				//Actual velocity in RPM
	float*		pfKf;					//Reference feed forward constant
	float*		pfKp;					//Proportional gain
	float*		pfKi;					//Integral gain
	float*		pfKd;					//Derivative gain
	float*		pfMinErr;				//Minimum tolerable error
	uint32_t* 	pu32Timelevel;				//Function execution interval in milliseconds
	float* 		pfOutLim;				//Output and integral term limit
	//------------------------------------------------------------------------------------------------------------------------
	// Outputs
	//------------------------------------------------------------------------------------------------------------------------
	float		fPidOut;					//Output of PID
	uint8_t		u8PidStatusWord;			//Status word of PID
}T_PID;

//----------------------------------------------------------------------------------------------------------------------------
// GLOBAL FUNCTION DECLARATIONS
//----------------------------------------------------------------------------------------------------------------------------
void vPid(T_PID* ptPid);

#endif	//_PID_H_
